<!DOCTYPE html>
{% load static %}
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="/static/css/sidebar.css">
  <link rel="stylesheet" href="/static/css/dashboard.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.3/dist/sweetalert2.min.css">
  <link rel="stylesheet" type="text/css" href="{% static 'css/Questionmaster.css' %}">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"
    integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
  <div class="sidebar">
    <div class="anusLogo"><img src="../static/img/Kavin Logo.png" alt=""></div>
    <div class="dashBoard">
      <a class="questionsmaster" href="/admin_dashboard"><img src="../static/img/dashboard.png" alt="">Dashboard</a>
      <a class="questionsmaster" href="index"><img src="../static/img/questiontable.png" alt="">Questions Table</a>
      <a class="questionsmaster" href="show_registeruser"><img src="../static/img/registereduser.png" alt=""> Register details</a>
      <a class="questionsmaster" href="user_result"> <img src="../static/img/userresult.png" alt="">User Result</a>
      <a class="questionsmaster" href="add"><img src="../static/img/addquestions.png" alt="">Add Questions</a>

      <div class="ReportSubMenus">
      
        <!-- <a href="">
          <img src="static/img/rightArrow.png" alt="">Report
        </a> -->
      </div>
    </div>
    <div class="humburger"></div> <!-- Add this line -->
  </div>

  <div class="content">
    <div class="topBar">
      <!-- <div class="gd">
        <h2 id="result"></h2>
      </div> -->
      <div class="dashboard_heading">
        <h2 id="result1">Add questions and options</h2>
      </div>
      <div class="dropdown">
        <li class="nav-item">
          <a href="../logout" class="nav-link">Logout</a>
        </li>
        <!-- <div class="dropdown-content">
          <a href="logout">Logout</a>
        </div> -->
      </div>
    </div>

    <div class="ques">
      <form action="addrecord/" method="POST" onsubmit="return validateForm()">
        {% csrf_token %}
        <!-- <h1><u>Add question and option</u></h1> -->
        <h3><label for="experience">Experience:</label></h3><br>
        <select name="experience" id="experience" required>
          <option value="">Select Experience</option>
          <option value="fresher">Fresher</option>
          <option value="1 + year">1+ Year</option>
          <option value="2 + year">2+ Year</option>
        </select>
        <h3><label for="position">position:</label></h3><br>
        <select name="position" id="position" required>
          <option value="">Select Position</option>
          <!-- <option value="python">Python</option> -->
          <!-- <option value="dotnet">Dotnet</option> -->
          <option value="django">python,django,mysql</option>
          <option value="wordpress">wordpress</option>
          <option value="python">Python</option>
          <!-- <option value="mango db">MangoDB</option>
          <option value="mysql">Mysql</option>
          <option value="front end">Front-End</option> -->
        </select>

        <h3><label for="question">Question:</label></h3><br>
        <input type="text" name="question" id="question" placeholder="Question" required>
        <br><br>

        <div class="input_fields_wrap">
          <div class="drop">
            <button type="button" class="add_field_button">Add options</button>
          </div>
         <h3><label for="option">Options:</label></h3><br>
          <input type="text" name="mytext" placeholder="Option" required>
         
          <br>  
        </div>

        <h3><label for="correct_option">Correct Option:</label></h3>  <br>
        <input type="text" name="correct_option" id="correct_option" placeholder="Answer" required>
        <br><br>
        <input type="submit" name="submit" value="Submit">
      </form>
    </div>
  </div>

  <!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.3/dist/sweetalert2.min.js"></script>
  <script>
    let date = new Date();
    let time = date.getHours();
    if (time >= 5 && time < 12) {
      document.getElementById("result").innerHTML = "Good Morning";
    } else if (time >= 12 && time < 17) {
      document.getElementById("result").innerHTML = "Good Afternoon";
    } else if (time >= 17 && time < 21) {
      document.getElementById("result").innerHTML = "Good Evening";
    } else {
      document.getElementById("result").innerHTML = "Good Night";
    }
    const humburger = document.querySelector(".humburger");
    const sidebar = document.querySelector(".sidebar");
    if (humburger && sidebar) {
      humburger.addEventListener("click", function() {
        sidebar.classList.toggle("active");
      });
    } else {
      console.error('Humburger or sidebar element not found.');
    } -->
<script>
    const addFieldButton = document.querySelector('.add_field_button');
    const inputFieldsWrap = document.querySelector('.input_fields_wrap');

    let numberOfTextboxes = 1;
    const MAX_TEXTBOXES = 4;

    addFieldButton.addEventListener('click', function (event) {
      event.preventDefault();

      if (numberOfTextboxes < MAX_TEXTBOXES) {
        const inputField = document.createElement('div');
        inputField.classList.add('input');
        inputField.innerHTML = `
          <input type="text" name="mytext" placeholder="Option" required>
        `;

        inputFieldsWrap.appendChild(inputField);
        numberOfTextboxes++;

        if (numberOfTextboxes === MAX_TEXTBOXES) {
          addFieldButton.disabled = true;
        }
      }
    });

    function validateForm() {
      const experience = document.getElementById("experience").value;
      const position = document.getElementById("position").value;
      const question = document.getElementById("question").value;
      const correct_option = document.getElementById("correct_option").value;

      const error = [];

      if (experience === "") {
        error.push("Please select experience.");
      }

      if (position === "") {
        error.push("Please select position.");
      }

      if (question.trim() === "") {
        error.push("Please enter a question.");
      }

      const options = document.querySelectorAll('input[name="mytext"]');
      let optionValues = [];
      options.forEach((option) => {
        if (option.value.trim() === "") {
          error.push("Please enter all options.");
        }
        optionValues.push(option.value.trim());
      });

      if (new Set(optionValues).size !== optionValues.length) {
        error.push("Options must be unique.");
      }

      if (correct_option.trim() === "") {
        error.push("Please enter the correct option.");
      }

      if (!optionValues.includes(correct_option.trim())) {
        error.push("The correct option must be one of the provided options.");
      }

      if (error.length > 0) {
        Swal.fire({
          icon: 'error',
          title: 'Validation Error',
          text: error.join('\n'),
        });

        return false;
      }

      return true;
    }
  </script>
</body>

</html>
