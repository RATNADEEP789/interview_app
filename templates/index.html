<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="static/css/sidebar.css">
  <link rel="stylesheet" href="static/css/dashboard.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.3/dist/sweetalert2.min.css">
  <link rel="stylesheet" href="static/css/index.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/simplePagination.js/1.6/jquery.simplePagination.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/simplePagination.js/1.6/jquery.simplePagination.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.6/dist/sweetalert2.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.6/dist/sweetalert2.min.js"></script>
</head>

<body>
  <div class="sidebar">
  <div class="anusLogo"><img src="static/img/Kavin Logo.png" alt=""></div>
  <div class="dashBoard">
    <a class="index" href="admin_dashboard"><img src="../static/img/dashboard.png" alt="">Dashboard</a>
    <a class="index" href="index"><img src="../static/img/questiontable.png" alt="">Questions Table</a>
    <a class="index" href="show_registeruser"><img src="../static/img/registereduser.png" alt="">Register details</a>
    <a class="index" href="user_result"><img src="../static/img/userresult.png" alt="">User Result</a>
    <a class="index" href="add"><img src="../static/img/addquestions.png" alt="">Add Questions</a>

    <div class="ReportSubMenus">
     

      <!-- <a href="">
        <img src="static/img/rightArrow.png" alt="">Report
      </a> -->
      <!-- <a href="hh_family_users_details">
        <img src="static/img/rightArrow.png" alt=""> HH-Family-Details
      </a>
      <a href="haemoglobin">
        <img src="static/img/rightArrow.png" alt=""> Haemoglobin Test 
      </a> -->
    </div>
  </div>
  <div class="humburger"></div> <!-- Add this line -->
</div>
  <div class="content">
    <div class="topBar">
      <!-- <div class="gd">
        <h2 id="result"></h2>
      </div> -->
     
      <div class="dashboard_heading">
        <h2 id="result1">Questions table</h2>
      </div>
      <div class="dropdown">
        <li class="nav-item">       
          <a href="../logout" class="nav-link">Logout</a>
      </li>
        <!-- <div class="dropdown-content">
          <a href="logout">Logout</a>
        </div> -->
      </div>
    </div>
     <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search...">
        <button id="searchButton">Search</button>
    </div>
    <table id="questionsTable" class="table-width">
      <thead>
        <tr>
          <th>Sno</th>
          <th>Experience</th>
          <th>Position</th>
          <th>Questions</th>
          <th>Option</th>
          <th>Answer</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        {% for x in questions_master_db %}
          <tr>
            <td>{{ forloop.counter }}</td> <!-- Empty cell for dynamically generated SNO -->
            <td>{{x.fld_total_exp_name}}</td>
            <td>{{x.fld_post_applied_for_name}}</td>
            <td>{{x.fld_question_text}}</td>
            <td>{{x.fld_option_name}}</td>
            <td>{{x.fld_correct_option_name}}</td>
            <td><button class="btn-green"><a href='update/{{x.fld_slno}}'>EDIT</a></button></td>
            <td><button class="btn-error" onclick="showConfirmation('{{x.fld_slno}}')">DELETE</button></td>
          </tr>
        {% endfor %}  
      </tbody>
    </table>
    <!-- <section>
      <div class="progressbox" id="progsb">
        <div class="firstp">
          <p>Total Registered Users</p>
          <p>{{ count_of_reg_users }}</p>
        </div>
        <div class="tebline"></div>
        <div class="secondp">
          <p>Total Approved Users</p>
          <p>{{ count_of_approved_user }}</p>
        </div>
        <div class="tebline"></div>
        <div class="thirdp">
          <p>Total Declined Users</p>
          <p>{{ count_of_decline_user }}</p>
        </div>
      </div>
    </section>


  </div> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.3/dist/sweetalert2.min.js"></script>
  <script>
    let date = new Date();
    let time = date.getHours();
    if (time >= 5 && time < 12) {
      document.getElementById("result").innerHTML = "Good Morning";
    } else if (time >= 12 && time < 17) {
      document.getElementById("result").innerHTML = "Good Afternoon";
    } else if (time >= 17 && time < 21) {
      document.getElementById("result").innerHTML = "Good Evening";
    } else {
      document.getElementById("result").innerHTML = "Good Night";
    }
    const humburger = document.querySelector(".humburger");
    const sidebar = document.querySelector(".sidebar");
    if (humburger && sidebar) {
      humburger.addEventListener("click", function() {
        sidebar.classList.toggle("active");
      });
    } else {
      console.error('Humburger or sidebar element not found.');
    }
  </script> -->

  <script>
    $(document).ready(function() {
      var tableRows = $('#questionsTable tbody tr');
      var rowsPerPage = 10; // Number of rows to display per page
  
      $('#questionsTable').after('<ul id="pagination"></ul>');
      var rowsTotal = tableRows.length;
      var numPages = Math.ceil(rowsTotal / rowsPerPage);
  
      $('#pagination').pagination({
        items: rowsTotal,
        itemsOnPage: rowsPerPage,
        cssStyle: 'light-theme',
        onPageClick: function(pageNumber) {
          var start = (pageNumber - 1) * rowsPerPage;
          var end = start + rowsPerPage;
  
          tableRows.hide().slice(start, end).show();
        }
      });

      // Show the first page on load
      $('#pagination').pagination('selectPage', 1);
    });
  </script>

  <!-- showing the pop up message for conformation deletion   -->
 <script>
  function showConfirmation(questionId) {
    Swal.fire({
      title: 'Confirmation',
      text: 'Do you want to delete this question?',
      icon: 'question',
      showCancelButton: true,
      confirmButtonText: 'Yes',
      cancelButtonText: 'No'
    }).then((result) => {
      if (result.isConfirmed) {
        // If user confirms, redirect to the delete URL or trigger the delete functionality
        window.location.href = 'delete/' + questionId;
      } else {
        // If user cancels, do nothing or show a message
        // For example:
        Swal.fire('Canceled', 'Deletion canceled.', 'info');
      }
    });
  }
</script>

 <!-- Auto genrated the dynamic SL no  -->
  <!-- <script>
    document.addEventListener('DOMContentLoaded', function() {
      var table = document.getElementById('questionsTable');
      var rows = table.getElementsByTagName('tr');

      for (var i = 1; i < rows.length; i++) {
        var snoCell = rows[i].getElementsByTagName('td')[0];
        snoCell.textContent = i;
      }
    });
  </script> -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
      const searchInput = document.getElementById('searchInput');
      const searchButton = document.getElementById('searchButton');
      const tableRows = document.querySelectorAll('#questionsTable tbody tr');

      searchButton.addEventListener('click', function () {
          const searchText = searchInput.value.toLowerCase().trim();

          tableRows.forEach(function (row) {
              const rowData = row.textContent.toLowerCase();
              if (rowData.includes(searchText)) {
                  row.style.display = ''; // Show the row
              } else {
                  row.style.display = 'none'; // Hide the row
              }
          });
      });
  });
</script>

  
</body>

</html>