<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="static/css/sidebar.css">
  <link rel="stylesheet" href="static/css/dashboard.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.3/dist/sweetalert2.min.css">
  <link rel="stylesheet" href="static/css/register_user.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/simplePagination.js/1.6/jquery.simplePagination.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/simplePagination.js/1.6/jquery.simplePagination.js"></script>
</head>

<body><div class="sidebar">
  <div class="anusLogo"><img src="../static/img/Kavin Logo.png" alt=""></div>
  <div class="dashBoard">
    <a class="registeruser"      href="/admin_dashboard"><img src="../static/img/dashboard.png" alt="">Dashboard</a>
    <a class="registeruser"   href="index"><img src="../static/img/questiontable.png" alt="">Questions Table</a>
    <a class="registeruser" href="show_registeruser"><img src="../static/img/registereduser.png" alt="">Register details</a>
    <a class="registeruser" href="user_result"><img src="../static/img/userresult.png" alt="">User Result</a>
    <a class="registeruser" href="add"><img src="../static/img/addquestions.png" alt="">Add Questions</a>

    <div class="ReportSubMenus">
    
      <!-- <a href="">
        <img src="static/img/rightArrow.png" alt="">Report
      </a> -->
      <!-- <a href="hh_family_users_details">
        <img src="static/img/rightArrow.png" alt=""> HH-Family-Details
      </a>
      <a href="haemoglobin">
        <img src="static/img/rightArrow.png" alt=""> Haemoglobin Test 
      </a> -->
    </div>
  </div>
  <div class="humburger"></div> <!-- Add this line -->
</div>

  <div class="content">
    <div class="topBar">
      <!-- <div class="gd">
        <h2 id="result"></h2>
      </div> -->
      <div class="dashboard_heading">
        <h2 id="result1">Register details</h2>
      </div>
      <div class="dropdown">
        <li class="nav-item">       
          <a href="../logout" class="nav-link">Logout</a>
      </li>
        <!-- <div class="dropdown-content">
          <a href="logout">Logout</a>
        </div> -->
      </div>
    </div>

    <table id="questionsTable" class="table-width">
      <thead>
        <tr>
         
          <th>SL no</th>
          <th>Full name</th>
         <th>Mobile number</th>
          <th>Email id</th>
          <th>Experience</th>
          <th>Position</th>
          <th>User resume</th>
        </tr>
      </thead>
      <tbody>
        {% for  user in users %}
          <tr>
             <td>{{ forloop.counter }}</td> <!--auto genrated -->
            <td>{{ user.full_name}}</td>
            <td>{{ user.mobile_number}}</td>
            <td>{{ user.email_id}}</td>     
            <td>{{ user.Expereince}}</td>
            <td>{{ user.possition}}</td>
           
            <td>   
              {% if user.File %}
              <a href="{% url 'downloadfile' user.fld_slno %}" class="download-link">Download resume</a>
            {% else %}
              <span class="no-resume">No resume available</span>
            {% endif %}
          </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  
    <!-- <section>
      <div class="progressbox" id="progsb">
        <div class="firstp">
          <p>Total Registered Users</p>
          <p>{{ count_of_reg_users }}</p>
        </div>
        <div class="tebline"></div>
        <div class="secondp">
          <p>Total Approved Users</p>
          <p>{{ count_of_approved_user }}</p>
        </div>
        <div class="tebline"></div>
        <div class="thirdp">
          <p>Total Declined Users</p>
          <p>{{ count_of_decline_user }}</p>
        </div>
      </div>
    </section>
  </div> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.3/dist/sweetalert2.min.js"></script>
  <script>
    let date = new Date();
    let time = date.getHours();
    if (time >= 5 && time < 12) {
      document.getElementById("result").innerHTML = "Good Morning";
    } else if (time >= 12 && time < 17) {
      document.getElementById("result").innerHTML = "Good Afternoon";
    } else if (time >= 17 && time < 21) {
      document.getElementById("result").innerHTML = "Good Evening";
    } else {
      document.getElementById("result").innerHTML = "Good Night";
    }
    const humburger = document.querySelector(".humburger");
    const sidebar = document.querySelector(".sidebar");
    if (humburger && sidebar) {
      humburger.addEventListener("click", function() {
        sidebar.classList.toggle("active");
      });
    } else {
      console.error('Humburger or sidebar element not found.');
    }
  </script> -->
  <!-- Auto genrated the dynamic SL no  -->
  <script>
    const downloadLinks = document.querySelectorAll('.download-link');
    
    downloadLinks.forEach(link => {
      link.addEventListener('click', event => {
        event.preventDefault();
        const userRow = event.target.closest('tr');
        const noResumeMessage = userRow.querySelector('.no-resume');
        
        if (noResumeMessage) {
          alert('No resume available for this user.');
        } else {
          window.location.href = event.target.href;
        }
      });
    });
  </script>
  <!-- <script>
    document.addEventListener('DOMContentLoaded', function() {
      var table = document.getElementById('questionsTable');
      var rows = table.getElementsByTagName('tr');

      for (var i = 1; i < rows.length; i++) {
        var snoCell = rows[i].getElementsByTagName('td')[0];
        snoCell.textContent = i;
      }
    });
  </script> -->
  <script>
    $(document).ready(function() {
      var tableRows = $('#questionsTable tbody tr');
      var rowsPerPage = 10; // Number of rows to display per page
  
      $('#questionsTable').after('<ul id="pagination"></ul>');
      var rowsTotal = tableRows.length;
      var numPages = Math.ceil(rowsTotal / rowsPerPage);
  
      $('#pagination').pagination({
        items: rowsTotal,
        itemsOnPage: rowsPerPage,
        cssStyle: 'light-theme',
        onPageClick: function(pageNumber) {
          var start = (pageNumber - 1) * rowsPerPage;
          var end = start + rowsPerPage;
  
          tableRows.hide().slice(start, end).show();
        }
      });

      // Show the first page on load
      $('#pagination').pagination('selectPage', 1);
    });
  </script>

  
</body>

</html>